<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		  <title>Student Drilldown Dashboard</title><!-- cdf-bootstrap-script-includes -->		<script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf/js/cdf-bootstrap-script-includes.js?v=4b882a2650d4c63fce58d7802308a537"></script>
<!-- cdf-bootstrap-ie8script-includes --><!--[if lte IE 8]>
		<script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf/js-legacy/lib/html5shiv/html5shiv.js?v=ee68da404bd6cbdab3adb3bf9219c207"></script>
<![endif]-->
<!-- cdf-bootstrap-style-includes -->		<link href="/pentaho/api/repos/pentaho-cdf/css/cdf-bootstrap-style-includes.css?v=8fff571c27b55af6ffd0805ebf6f22b6" rel="stylesheet" type="text/css" />
<!-- bootstrap.css.map --><!-- cdf-bootstrap-ie8scriptAfterLink-includes --><!--[if lte IE 8]>
		<script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf/js-legacy/lib/respond/respond.js?v=c03b5dcc8955c34fa65e59e7e7daacf0"></script>
<![endif]-->
<!-- cdf-cdf-dashboard-script-includes -->
		<script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf/js-legacy/lib/daterangepicker/daterangepicker.jQuery.js?v=9f077778b7bab42c6f5821b32aa3fda8"></script>
		<script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf/js-legacy/lib/sparkline/jquery.sparkline.js?v=c7638b825bc7deb1cf58c990825d35b2"></script>
<!-- cdf-cdf-dashboard-style-includes -->
		<link href="/pentaho/api/repos/pentaho-cdf/js-legacy/lib/daterangepicker/ui.daterangepicker.css?v=52fc5b767447f35ff9b1d41168c3efb2" rel="stylesheet" type="text/css" />
  <script language="javascript" type="text/javascript" src="/pentaho/api/repos/pentaho-cdf-dd/js/CDF.js?v=e752b25601e29d1d54a2bc6cd388b9ef"></script>
  <link href="/pentaho/api/repos/pentaho-cdf-dd/css/CDF-CSS.css?v=f2b55b007fca25c54861edcb0831b7bc" rel="stylesheet" type="text/css" />

<script language="javascript" type="text/javascript">
Dashboards.context = {
  "locale": "en_US",
  "params": {},
  "path": "/public/ascend/dashboards/student_drilldown.wcdf",
  "queryData": {},
  "roles": [
    "Authenticated",
    "Instructor",
    "SSOUser"
  ],
  "serverLocalDate": 1465882100145,
  "serverUTCDate": 1465896500145,
  "sessionAttributes": {},
  "sessionTimeout": 7200,
  "user": "jcaluyajr"
}

</script>

	</head>
	<body>
		<script language="javascript">
			// Init jQuery i18n plugin
			loadMessageBundles = function(lang) {
				jQuery.i18n.properties({
					name:'messages',
					path:'/pentaho/api/repos/pentaho-cdf-dd/tmp/.cache/public/ascend/dashboards/',
					mode:'both',
					language:(lang == 'browser' ? jQuery.i18n.browserLang() : lang),
					callback: function() {
						
					}
				});
				Dashboards.setI18nSupport('en-US', jQuery.i18n);
			}

			$(document).ready(function(){
				// Initialize jquery.i18n plugin - load message files
				var userLocale = 'en-US';
				var formProvider = cdo.format.language(userLocale);
				cdo.format.language(formProvider);
				moment.locale(userLocale);
				loadMessageBundles(userLocale);
			});
		</script>
	
		
  <div class='container'>
    <script language="javascript" type="text/javascript" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/public/ascend/dashboards/../files/iframeResizer.contentWindow.js?v=1465896500042"></script>
    
    <script language="javascript" type="text/javascript" src="/pentaho/plugin/pentaho-cdf-dd/api/resources/public/ascend/dashboards/../files/ascend.js?v=1465896500042"></script>
    
    <link rel="stylesheet" type="text/css" href="/pentaho/plugin/pentaho-cdf-dd/api/resources/public/ascend/dashboards/../files/ascend.css?v=1465896500042" />
    
    <div id='55af12ee-2d21-ed39-688b-a75d7e5ff341' >
      <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5JXGJN"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5JXGJN');</script>
<!-- End Google Tag Manager --> 
      
    </div>
    <div id='mainContent'  class='row clearfix ' >
      <div class='col-xs-12 last'><div id='mainColumn' >
        <div id='headerRow'  class='WDheader row clearfix ' >
        </div>
        <div id='nameRoleObj'  class='nameRole row clearfix ' >
        </div>
        <div id='predictRow'  class='row clearfix ' >
          <div class='col-xs-8'><div id='predictColumn'  class='predictColumn ' >
            <div id='studentNameRow'  class='row clearfix ' >
              <div class='col-xs-8'><div id='studentNameObj'  class='schoolName ' >
              </div></div>
              <div class='col-xs-3'><div id='viewUsageButtonObj'  class='detailButton viewUsageButton detailButtonWidth ' >
              </div></div>
              <div class='col-xs-1 last'><div id='printButtonObj'  class='print ' >
              </div></div>
            </div>
            <div id='predictTitleRow'  class='row clearfix ' >
              <div class='col-xs-9 average last'><div id='predictTitle'  class='facultyTitle ' >
              </div></div>
            </div>
            <div id='barLineRow'  class='row clearfix ' >
              <div class='col-xs-12 last'><div id='barLineContainer'  class='barLineContainer ' >
                <div id='barLineContainerRow'  class='row clearfix ' >
                  <div class='col-xs-3'><div id='barLineLegendColumn'  class='barLineLegend ' >
                    <div id='barLineLegendRow'  class='row clearfix ' >
                      <div class='col-xs-12 last'><div id='barLineLegendColumnObj'  class='chartLegend ' >
                      </div></div>
                    </div>
                    <div id='barLineDetailsButtonRow'  class='row clearfix ' >
                      <div class='col-xs-12 last'><div id='barLineDetailsButtonObj'  class='chartButton ' >
                      </div></div>
                    </div>
                  </div></div>
                  <div class='col-xs-9'><div id='chartsColumn' >
                    <div id='chartsRow'  class='row clearfix ' >
                      <div class='col-xs-12'><div id='barLineChartColumnObj'  class='ongoingChart ' >
                      </div></div>
                      <div class='col-xs-12 last'><div id='completeBarLineChartColumnObj'  class='completedChart ' >
                      </div></div>
                    </div>
                    <div id='legendRow'  class='row clearfix ' >
                      <div class='col-xs-12 last'><div id='customLegendObj'  class='customLegend ' >
                      </div></div>
                    </div>
                  </div></div>
                  <div class='col-xs-9'><div id='errorMessage'  class='errorMessage WDhidden chartError ' >
                  </div></div>
                  <div class='col-xs-1 last'><div id='barLineUsageColumnObj'  class='usageColumn WDhidden ' >
                  </div></div>
                </div>
              </div></div>
            </div>
            <div id='noteRow'  class='row clearfix ' >
              <div class='col-xs-12 last'><div id='noteColumn'  class='note ' >
                Note: Except for the Comprehensive Predictor, only the scores from your first attempt of a proctored test are included in the predictor. Other criteria, such as minimum score and percent completed, may also be applied when determining which attempt to include. 
                
              </div></div>
            </div>
            <div id='showHideRow'  class='row clearfix ' >
              <div class='col-xs-4 last'><div id='showHideButtonObj'  class='showHideButton active ' >
              </div></div>
            </div>
            <div id='proctoredTitleRow'  class='row clearfix ' >
              <div class='col-xs-12 last'><div id='proctoredTitle'  class='titleText ' >
                Proctored Test Details 
                
              </div></div>
            </div>
            <div id='proctoredTableRow'  class='row clearfix ' >
              <div class='col-xs-12 last'><div id='proctoredTableObj'  class='proctoredTable noClick ' >
              </div></div>
            </div>
            <div id='footer'  class='row clearfix ' >
              <div class='col-xs-12 last'><div id='footerObj'  class='footer ' >
              </div></div>
            </div>
          </div></div>
          <div class='col-xs-4 last'><div id='infoColumn'  class='infoColumn WDhidden ' >
            <div id='explainHeaderText'  class='title row clearfix ' >
              <b>Explain this chart</b> 
              
            </div>
            <div id='explainText'  class='row clearfix ' >
              This chart provides a prediction of your likelihood to pass the NCLEX based on your performance in the first attempt at each proctored assessment in your nursing program. Based on the students current progress and performance on proctored assessments in your program, ATI has predicted your likelihood of passing the NCLEX when you complete your nursing program. The predicted pass rate assumes your remaining assessment scores will be similar to your current performance. The predicted pass rate will become more accurate as you complete more proctored assessments. 
              
            </div>
            <div id='likelihoodHeaderText'  class='title row clearfix ' >
              <b>Likelihood of Passing the NCLEX</b> 
              
            </div>
            <div id='likelihoodText'  class='row clearfix ' >
              Based on the students current progress and performance on proctored assessments in your program, ATI has predicted your likelihood of passing the NCLEX when you complete your nursing program. The predicted pass rate assumes your remaining assessment scores will be similar to your current performance. The predicted pass rate will become more accurate as you complete more proctored assessments. 
              
            </div>
          </div></div>
        </div>
      </div></div>
    </div>
    <div id='hiddenElements'  class='WDhidden row clearfix ' >
      <div class='col-xs-6'><div id='titlePopupColumnObj'  class='titlePopup ' >
        <div id='titlePopupRowTile'  class='popupTitle row clearfix ' >
          Probability of Passing the NCLEX® 
          
        </div>
        <div id='titlePopupRowText'  class='popupText row clearfix ' >
          This number corresponds to your eventual expected probability of passing the NCLEX®. This number is based on an analysis of students with comparable patterns of performance and their resulting probablility of passing the NCLEX® on the first attempt. 
          
        </div>
      </div></div>
      <div class='col-xs-1'><div id='titlePopupObj'  class='titlePopup ' >
      </div></div>
      <div class='col-xs-6'><div id='commentsColumn'  class='feedback ' >
        <div id='titleRow'  class='studentsTitle row clearfix ' >
          <div class='col-xs-10'><div id='feedbackTitle' >
            Feedback
 
            
          </div></div>
          <div class='col-xs-2 last'><div id='saveButtonObj' >
          </div></div>
        </div>
        <div id='commentsRow'  class='row clearfix ' >
          <div class='col-xs-12 last'><div id='feedbackObj'  class='feedback ' >
          </div></div>
        </div>
      </div></div>
      <div class='col-xs-12'><div id='emptyPopupObj' >
        Please insert feedback. 
        
      </div></div>
      <div class='col-xs-12'><div id='sendOkPopupObj' >
        Thank you for your feedback. 
        
      </div></div>
      <div class='col-xs-12'><div id='sendNotOkPopupObj' >
        Please send again your feedback. 
        
      </div></div>
      <div class='col-xs-12'><div id='nationalPassRatePopupObj'  class='titlePopup ' >
        <div id='nationalPassRateRowTitle'  class='popupTitle row clearfix ' >
          National Average NCLEX® Pass Rate 
 
          
        </div>
        <div id='nationalPassRateRowText'  class='popupText row clearfix ' >
          Most recently published National NCLEX® Pass Rate for this program type as provided by National<br>
Council of State Boards of Nursing (NCSBN). 
 
          
        </div>
      </div></div>
      <div class='col-xs-12'><div id='institutionPassRatePopupObj'  class='titlePopup ' >
        <div id='institutionPassRateRowTitle'  class='popupTitle row clearfix ' >
          Institution Average NCLEX® Pass Rate 
 
          
        </div>
        <div id='instituionPassRateRowText'  class='popupText row clearfix ' >
          Most recently published NCLEX® Pass Rate for this institution as reported by the state Board of Nursing. 
 
          
        </div>
      </div></div>
      <div class='col-xs-12'><div id='barLineDetailsPopupObj'  class='titlePopup ' >
        <div id='barLineDetailsRowTitle'  class='popupTitle row clearfix ' >
          My Probability of Passing NCLEX® Chart 
          
        </div>
        <div id='barLineDetailsRowText'  class='popupText row clearfix ' >
          The chart provides your current and historical probability of passing the NCLEX® on the 1st attempt.<br> 
This chart does not indicate your current NCLEX® readiness but is instead an indicator of how your <br>
current academic performance is predictive of later NCLEX® success. 
          
        </div>
      </div></div>
      <div class='col-xs-2'><div id='termsPopupObj'  class='titlePopup ' >
        <div id='termsTitle'  class='popupTitle row clearfix ' >
          <span  class='studentPopup studentPopup ' >ATI’S PULSE PRODUCT 
          </span>
        </div>
        <div id='termsText'  class='popupText row clearfix ' >
        </div>
      </div></div>
      <div class='col-xs-1'><div id='titlePopupObj' >
      </div></div>
      <div class='col-xs-12 last'><div id='chartPopUpObj'  class='barPopUp ' >
      </div></div>
    </div>
    <div id='Version1.01'  class='WDhidden row clearfix ' >
    </div>
  </div>
<script language="javascript" type="text/javascript">
wcdfSettings = {
  "title": "Student Drilldown Dashboard",
  "author": "",
  "description": "Student Drilldown Dashboard",
  "style": "Clean",
  "widgetName": "",
  "widget": false,
  "rendererType": "bootstrap",
  "require": false,
  "widgetParameters": []
};

Dashboards.addParameter("studentIDParam", "");
Dashboards.setBookmarkable("studentIDParam");
Dashboards.setParameterViewMode("studentIDParam", "unused");

Dashboards.addParameter("studentNameParam", "");
Dashboards.setParameterViewMode("studentNameParam", "unused");

Dashboards.addParameter("classIDParam", "");
Dashboards.setBookmarkable("classIDParam");
Dashboards.setParameterViewMode("classIDParam", "unused");

Dashboards.addParameter("institutionIDParam", "");
Dashboards.setBookmarkable("institutionIDParam");
Dashboards.setParameterViewMode("institutionIDParam", "unused");

Dashboards.addParameter("zeroParam", "");
Dashboards.setParameterViewMode("zeroParam", "unused");

Dashboards.addParameter("avgsParam", "");
Dashboards.setParameterViewMode("avgsParam", "unused");

Dashboards.addParameter("errorLineParam", "");
Dashboards.setParameterViewMode("errorLineParam", "unused");

Dashboards.addParameter("finalResultParam", "");
Dashboards.setParameterViewMode("finalResultParam", "unused");

Dashboards.addParameter("totalScoresParam", "");
Dashboards.setParameterViewMode("totalScoresParam", "unused");

Dashboards.addParameter("detailsParam", "");
Dashboards.setParameterViewMode("detailsParam", "unused");

Dashboards.addParameter("warningParam", "");
Dashboards.setParameterViewMode("warningParam", "unused");

Dashboards.addParameter("programTypeParam", "");
Dashboards.setParameterViewMode("programTypeParam", "unused");

Dashboards.addParameter("feedbackParam", "");
Dashboards.setParameterViewMode("feedbackParam", "unused");

Dashboards.addParameter("userParam", "");
Dashboards.setParameterViewMode("userParam", "unused");

Dashboards.addParameter("dateParam", "");
Dashboards.setParameterViewMode("dateParam", "unused");

Dashboards.addParameter("browserParam", "");
Dashboards.setParameterViewMode("browserParam", "unused");

Dashboards.addParameter("versionParam", "");
Dashboards.setParameterViewMode("versionParam", "unused");

Dashboards.addParameter("commentParam", "");
Dashboards.setParameterViewMode("commentParam", "unused");

Dashboards.addParameter("dashboardParam", "Faculty Student Drilldown");
Dashboards.setParameterViewMode("dashboardParam", "unused");

Dashboards.addParameter("warningParam", "");
Dashboards.setParameterViewMode("warningParam", "unused");

Dashboards.addParameter("warningLineParam", "");
Dashboards.setParameterViewMode("warningLineParam", "unused");

Dashboards.addParameter("warningRow", "");
Dashboards.setParameterViewMode("warningRow", "unused");

var render_feedbackText = {
  type: "textInput",
  name: "render_feedbackText",
  priority: 5,
  parameter: "feedbackParam",
  listeners: [],
  htmlObject: "feedbackObj",
  executeAtStart: true
};

var render_dateRange_dummy = {
  type: "DateRangeInput",
  name: "render_dateRange_dummy",
  priority: 5,
  parameter: [],
  listeners: [],
  singleInput: true,
  inputSeparator: ">",
  canClickOutsidePopup: false,
  earliestDate: "-1years",
  latestDate: "+1years",
  leftOffset: 0,
  topOffset: 15,
  executeAtStart: false
};

var render_nameSessionVarQueryComponent = {
  type: "Query",
  name: "render_nameSessionVarQueryComponent",
  priority: 0,
  parameters: [],
  executeAtStart: true,
  listeners: [],
  asynchronousMode: true,
  postFetch: function f(data){
    var result = data.resultset;
    
    Dashboards.setParameter("roleParam", result[0][1]);
    Dashboards.setParameter("userIDParam", result[1][1]);
        
    return data;
} ,
  queryDefinition:  {
    dataAccessId: "nameSessionVariables",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_studentNameQueryComponent = {
  type: "Query",
  name: "render_studentNameQueryComponent",
  priority: 1,
  parameters: [],
  executeAtStart: true,
  listeners: [],
  asynchronousMode: true,
  postFetch: function f(data){
    var result = data.resultset;
    
    Dashboards.setParameter("nameParam", result[0][0]);
        
    return data;
} ,
  queryDefinition:  {
    dataAccessId: "userNameQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_nameRoleHeader = {
  type: "textComponent",
  name: "render_nameRoleHeader",
  priority: 2,
  expression: function f(){
    var ph = $('#nameRoleObj');
    
    var $welcome = $("<div class='welcomeRole'>Welcome</div>").appendTo(ph);
    var $name =$("<div class='textRole'></div>").appendTo(ph);
    $name.text ( nameParam.split(',').slice(-1) + (" ") + nameParam.split(',').slice(0,-1) + (" (") + roleParam + ("). "));
    var $text =$("<div class='textRole1'></div>").appendTo(ph);
    if ( nameParam.split(',').length == 1 ){
        $text.text ("If you are not " + nameParam + (", click"));
    }else{
        $text.text ("If you are not " + nameParam.split(',').slice(-1) + " " + nameParam.split(',').slice(0,-1) + (", click"));
    }
    
    var MyEnv = ascend.whichEnvironmentText;
        
  /*   var $here =$("<div> <a class='hereRole' href='http://www.atitesting.com/ati_next_gen/Logout.aspx'> here </a> </div>").appendTo(ph); */
     var $here =$("<div> <a class='hereRole' href='https://" + MyEnv + ".atitesting.com/pentaho/Logout'> here </a> </div>").appendTo(ph); 
/*    var $here =$("<div> <a class='hereRole' href='"+webAppPath+"/Logout'> here </a> </div>").appendTo(ph);*/
} ,
  htmlObject: "nameRoleObj",
  listeners: [],
  executeAtStart: true
};

var render_studentNameQuery = {
  type: "Query",
  name: "render_studentNameQuery",
  priority: 2,
  parameters: [["studentIDParam","studentIDParam"]],
  resultvar: "studentNameParam",
  executeAtStart: true,
  listeners: [],
  asynchronousMode: true,
  queryDefinition:  {
    dataAccessId: "studentNameQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_nameHeader = {
  type: "textComponent",
  name: "render_nameHeader",
  priority: 3,
  expression: function f() { 
    return "Student - " + studentNameParam ;
},
  htmlObject: "studentNameObj",
  listeners: [],
  executeAtStart: true
};

var render_printButton = {
  type: "buttonComponent",
  name: "render_printButton",
  priority: 5,
  label: "Print",
  htmlObject: "printButtonObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f() {
    window.print();    
} ,
  actionDefinition:  {

  }
};

var render_feedbackPopupButton = {
  type: "buttonComponent",
  name: "render_feedbackPopupButton",
  priority: 5,
  label: "Feedback",
  buttonStyle: "classic",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    render_feedbackPopup.popup($('.WDheader'));
} ,
  actionDefinition:  {

  }
};

var render_feedbackPopup = {
  type: "popup",
  name: "render_feedbackPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "commentsColumn",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_saveButtonComponent = {
  type: "buttonComponent",
  name: "render_saveButtonComponent",
  priority: 5,
  label: "Save",
  htmlObject: "saveButtonObj",
  buttonStyle: "classic",
  executeAtStart: true,
  listeners: [],
  actionParameters: [["userParam","userParam"],["dateParam","dateParam"],["browserParam","browserParam"],["versionParam","versionParam"],["commentParam","commentParam"],["dashboardParam","dashboardParam"]],
  expression: function f(){
    if ( feedbackParam === "" ){
        render_emptyFeedbackPopup.popup($('.feedback input'));
    }else{
        Dashboards.setParameter('userParam', Dashboards.context.user );
        Dashboards.setParameter('dateParam', new Date().toString('yyyy-MM-dd HH:mm:ss.sss') );
        Dashboards.setParameter('browserParam', navigator.sayswho.split(' ')[0] );
        Dashboards.setParameter('versionParam', navigator.sayswho.split(' ')[1] );
        Dashboards.setParameter('commentParam', Dashboards.getParameterValue('feedbackParam') );
        render_sendOkPopup.popup($('.feedback input'));
    }
    feedbackParam = "";
    render_feedbackText.update();
    //this.block();
},
  actionDefinition:  {
    dataAccessId: "sendCommentQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_emptyFeedbackPopup = {
  type: "popup",
  name: "render_emptyFeedbackPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "emptyPopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_sendOkPopup = {
  type: "popup",
  name: "render_sendOkPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "sendOkPopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_sendNotOkPopup = {
  type: "popup",
  name: "render_sendNotOkPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "sendNotOkPopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_averageTitleQueryComponent = {
  type: "Query",
  name: "render_averageTitleQueryComponent",
  priority: 2,
  parameters: [["institutionIDParam","institutionIDParam"]],
  resultvar: "programTypeParam",
  executeAtStart: true,
  listeners: [],
  asynchronousMode: true,
  queryDefinition:  {
    dataAccessId: "programTypeQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_averageTitle = {
  type: "textComponent",
  name: "render_averageTitle",
  priority: 3,
  expression: function f(){
   if (programTypeParam ==3){
        type = "-PN";
    }else{
        type = "-RN";
    }
    return "Pulse: Probability of Passing NCLEX" + type + "®"; 
} ,
  htmlObject: "predictTitle",
  listeners: [],
  executeAtStart: true,
  postExecution:  function f(){
    var a = $("#"+this.htmlObject);
    a.addClass('title2Popup');
    $('#titlePopupObj button').appendTo(a);   
}
};

var render_titlePopupButton = {
  type: "buttonComponent",
  name: "render_titlePopupButton",
  priority: 2,
  label: "i",
  htmlObject: "titlePopupObj",
  buttonStyle: "classic",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    render_titlePopup.popup($('#predictTitle'));
},
  actionDefinition:  {

  }
};

var render_titlePopup = {
  type: "popup",
  name: "render_titlePopup",
  priority: 2,
  executeAtStart: true,
  htmlObject: "titlePopupColumnObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_barLineLegendFreeform = {
  type: "freeform",
  name: "render_barLineLegendFreeform",
  priority: 0,
  parameters: [],
  manageCallee: true,
  executeAtStart: true,
  customfunction: function f(){
    
    var ph = $('#barLineLegendColumnObj');
    var $spacer = $("<div class='spacer'>&nbsp;</div>").appendTo(ph);
    
    var $externalHolder = $("<div class='external'>&nbsp;</div>").appendTo(ph);
    var $barHolder = $("<div class='bar'>&nbsp;</div>").appendTo($externalHolder);
    var $barFill = $("<div class='barFill proctored'>&nbsp;</div>").appendTo($barHolder);
    var $legendHolder = $("<div class='legend'>PROCTORED TEST SCORE</div>").appendTo($externalHolder);
    
    $externalHolder = $("<div class='external'>&nbsp;</div>").appendTo(ph);
    $barHolder = $("<div class='bar'>&nbsp;</div>").appendTo($externalHolder);
    $barFill = $("<div class='barFill likelihood'>&nbsp;</div>").appendTo($barHolder);
    $legendHolder = $("<div class='legend'>MY PROBABILITY OF PASSING NCLEX®</div>").appendTo($externalHolder);
    
    $externalHolder = $("<div class='external'>&nbsp;</div>").appendTo(ph);
    $barHolder = $("<div class='bar'>&nbsp;</div>").appendTo($externalHolder);
    $barFill = $("<div class='barFill national'>&nbsp;</div>").appendTo($barHolder);
    $legendHolder = $("<div id='nationalObj' class='legend national' </div>").appendTo($externalHolder);
    
    $externalHolder = $("<div class='external'>&nbsp;</div>").appendTo(ph);
    $barHolder = $("<div class='bar'>&nbsp;</div>").appendTo($externalHolder);
    $barFill = $("<div class='barFill program'>&nbsp;</div>").appendTo($barHolder);
    $legendHolder = $("<div id='programObj' class='legend program' </div>").appendTo($externalHolder);
        
},
  listeners: [],
  queryDefinition:  {

  }
};

var render_errorLineQueryComponent = {
  type: "Query",
  name: "render_errorLineQueryComponent",
  priority: 0,
  parameters: [],
  resultvar: "errorLineParam",
  executeAtStart: false,
  listeners: [],
  asynchronousMode: true,
  queryDefinition:  {
    dataAccessId: "_errorLineQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_totalScoresQueryComponent = {
  type: "Query",
  name: "render_totalScoresQueryComponent",
  priority: 1,
  parameters: [["institutionIDParam","institutionIDParam"],["classIDParam","classIDParam"],["studentIDParam","studentIDParam"]],
  resultvar: "totalScoresParam",
  executeAtStart: true,
  listeners: [],
  asynchronousMode: true,
  postFetch: function f(data){
    $('.ongoingChart').addClass('WDhidden');
    $('.completedChart').addClass('WDhidden');
    $('.errorMessage').addClass('WDhidden');
    
    var result = data.resultset,
        length = result.length;
    if ( result.length !== 0 ){
        var lastRow = result.length - 1;
        
        //Test if there is value for Institution AVG and hide legend if not,
        //store avg values in avgsParam
        var avgs = [];
        if ( result[0][2] === false ){
            $('.program').addClass('WDhidden');
            avgs = [ [ result[0][1], 200 ] ];
        }else{
            $('.program').removeClass('WDhidden');
            avgs = [ [ result[0][1], result[0][3] ] ];
        }
        Dashboards.setParameter('avgsParam', avgs); 
            
        //Look up for the lowest score to define the y axis min value
        var min = 100, score = "";
        for ( var i = 0; i < length; i++ ){
            if ( i != length - 1 ){
                for ( var j = 5; j < 7; j++){
                    score = result[i][j];
                    if ( score < min ) min = score;
                }
            }else{
                score = result[i][6];
                if ( score < min ) min = score;
            }
        }
        if ( min > 54 ){
            min = 50;
        }else min = min - 5;
        if ( min < 0 ) min = 0;
        Dashboards.setParameter('zeroParam', Math.floor(min/10)*10);
        if ( zeroParam > 50 ){
            zeroParam = 50;
        }else if ( zeroParam == 10 ) zeroParam = 0;
        avgs[0][0] = avgs[0][0] + zeroParam;
        avgs[0][1] = avgs[0][1] + zeroParam;
        
         //See if student improved or declined his Pulse Scores or his Proficiency Level
        warningParam = 0;
        for ( i = 0; i < length; i++ ){
            if ( result[i][14] == 1 && result[i][15] == "Improved Score" ){
                warningParam = 1;
                Dashboards.setParameter('warningRow',i);
                break;
            }else if ( result[i][14] == 1 && result[i][15] == "Low Score" ){
                warningParam = -1;
                Dashboards.setParameter('warningRow',i);
                break;
            }
        }
        Dashboards.setParameter('warningParam', warningParam);
        
        //Test if we have Comprehensive Predictor and choose chart to show accordingly
        if ( result[lastRow][7] ){
            $('.ongoingChart').addClass('WDhidden');
             $('.completedChart').removeClass('WDhidden');
             Dashboards.setParameter('finalResultParam', result[lastRow][6]);
            render_completeBarLineChart.update();
         }else{
            $('.ongoingChart').removeClass('WDhidden');
            $('.completedChart').addClass('WDhidden');
            Dashboards.setParameter('finalResultParam', 0);
            render_predictBarLineChart.update();
        }
        
    }else{
        $('.program').addClass('WDhidden');
        $('.errorMessage').removeClass('WDhidden');
        $('.errorMessage').text("No results available");
    }
} ,
  queryDefinition:  {
    dataAccessId: "totalScoresQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda"
  }
};

var render_customLegendFreeformComponent = {
  type: "freeform",
  name: "render_customLegendFreeformComponent",
  priority: 5,
  parameters: [],
  manageCallee: true,
  executeAtStart: true,
  customfunction: function f(){
    var result = Dashboards.getParameterValue('totalScoresParam'),
        length = result.length;
    
    var $ph = $("#"+this.htmlObject).empty(),
        //totalWidth = $ph.width();
        totalWidth = 400;
    
    var legendWidth = Math.floor( totalWidth / length );
    
    for ( var i = 0; i < length; i++ ){
        var place = legendWidth / 2 + legendWidth * i;
        var $legendHolder = $("<div class='legend' style='left: "+place+"px'>&nbsp;</div>").appendTo($ph);
        
        $legendHolder.text(result[i][0]);
    }
    
} ,
  htmlObject: "customLegendObj",
  listeners: [],
  queryDefinition:  {

  }
};

var render_nationalPassRateButton = {
  type: "buttonComponent",
  name: "render_nationalPassRateButton",
  priority: 5,
  label: "NATIONAL AVERAGE NCLEX® PASS RATE",
  htmlObject: "nationalObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    render_nationalPassRatePopup.popup($('#nationalObj'));
}
 ,
  actionDefinition:  {

  }
};

var render_nationalPassRatePopup = {
  type: "popup",
  name: "render_nationalPassRatePopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "nationalPassRatePopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_institutionPassRateButton = {
  type: "buttonComponent",
  name: "render_institutionPassRateButton",
  priority: 5,
  label: "INSTITUTION AVERAGE NCLEX® PASS RATE",
  htmlObject: "programObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    render_institutionPassRatePopup.popup($('#programObj'));
}
,
  actionDefinition:  {

  }
};

var render_institutionPassRatePopup = {
  type: "popup",
  name: "render_institutionPassRatePopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "institutionPassRatePopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_barLineDetailsButton = {
  type: "buttonComponent",
  name: "render_barLineDetailsButton",
  priority: 5,
  label: "Explain this chart",
  htmlObject: "barLineDetailsButtonObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    if ( $("#errorMessage").hasClass('WDhidden') ){
        render_barLineDetailsPopup.popup($('#chartsColumn'));
    }else{
        render_barLineDetailsPopup.popup($("#errorMessage"));
    }
} ,
  actionDefinition:  {

  }
};

var render_barLineDetailsPopup = {
  type: "popup",
  name: "render_barLineDetailsPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "barLineDetailsPopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_showHideButton = {
  type: "buttonComponent",
  name: "render_showHideButton",
  priority: 5,
  label: "Hide Details",
  htmlObject: "showHideButtonObj",
  buttonStyle: "classic",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    
    $('#proctoredTitleRow').toggleClass('WDhidden');
    $('#proctoredTableRow').toggleClass('WDhidden');
    if ( this.label == "Show Details" ){
        this.label = "Hide Details";
        $('.showHideButton').addClass('active');
        $('.showHideButton').removeClass('inactive');
    }else{
        this.label = "Show Details";
        $('.showHideButton').removeClass('active');
        $('.showHideButton').addClass('inactive');
    }
    this.update();
},
  actionDefinition:  {

  }
};

var render_proctoredTable = {
  type: "Table",
  name: "render_proctoredTable",
  priority: 5,
  htmlObject: "proctoredTableObj",
  listeners: [],
  parameters: [["institutionIDParam","institutionIDParam"],["studentIDParam","studentIDParam"]],
  executeAtStart: true,
  postFetch: function f(data){
    var result = data.resultset;
    var length = result.length;
    for (var i = 0; i < length; i++){
        for ( var j = 2; j < 6; j++){
            if (!isNaN(result[i][j])){
                result[i][j] = parseFloat(Math.round(result[i][j]*10)/10)+ "%";
            }
        }
    }
} ,
  extraOptions: [],
  expandParameters: [],
  expandOnClick: false,
  chartDefinition:  {
    dataAccessId: "proctoredTableQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda",
    clickAction: function f(data){
    var result = data.resultset,
        length = result.length;
    var newResult = [];
    
    for ( var i = 0; i < length; i++ ){
        if ( result[i][0] !== null ){
            newResult.push(result[i]);
        }
    }
    
    data.resultset = newResult;
    return data;
}
,
    colHeaders: ["Test","Date<br>Taken","Proctored<br>Test Score","National<br>Mean","Program<br>Mean","My Probability<br>of Passing<br>NCLEX®"],
    colTypes: ["formattedText","formattedText","formattedText","formattedText","formattedText","formattedText"],
    colFormats: ["%s","%s","%s","%s","%s","%s"],
    colWidths: [],
    colSortable: [],
    colSearchable: [],
    paginate: false,
    paginateServerside: false,
    paginationType: "two_button",
    filter: false,
    info: false,
    sort: false,
    sortBy: [],
    lengthChange: false,
    tableStyle: "classic"
  }
};

var render_termsButton = {
  type: "buttonComponent",
  name: "render_termsButton",
  priority: 5,
  label: "User terms and conditions",
  htmlObject: "footerObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    render_termsPopup.popup($('#footerObj'));
}
,
  actionDefinition:  {

  }
};

var render_termsPopup = {
  type: "popup",
  name: "render_termsPopup",
  priority: 5,
  executeAtStart: true,
  htmlObject: "termsPopupObj",
  gravity: "S",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_termsText = {
  type: "textComponent",
  name: "render_termsText",
  priority: 5,
  expression: function (){
    return ascend.termsText;
    },
  htmlObject: "termsText",
  listeners: [],
  executeAtStart: true
};

var render_viewUsageButton = {
  type: "buttonComponent",
  name: "render_viewUsageButton",
  priority: 5,
  label: "View Student Usage",
  htmlObject: "viewUsageButtonObj",
  buttonStyle: "themeroller",
  executeAtStart: true,
  listeners: [],
  actionParameters: [],
  expression: function f(){
    var studentIDParam = Dashboards.getParameterValue('studentIDParam'),
        institutionIDParam = Dashboards.getParameterValue('institutionIDParam'),
        bookmark = '{"impl"%3A"client"%2C"params"%3A {"institutionIDParam"%3A+' + '"' + institutionIDParam + '"' + '+%2C"classIDParam"%3A+' + '"' + classIDParam + '"' + '+%2C"studentIDParam"%3A+' + '"' + studentIDParam + '"' + '}}';
    return window.open(webAppPath+"/api/repos/:public:ascend:dashboards:usage.wcdf/generatedContent?"+'bookmarkState='+ bookmark,"_self");  
} ,
  actionDefinition:  {

  }
};

var render_barPopupComponent = {
  type: "popup",
  name: "render_barPopupComponent",
  priority: 5,
  executeAtStart: true,
  htmlObject: "chartPopUpObj",
  gravity: "N",
  draggable: false,
  closeOnClickOutside: true,
  parameters: [],
  listeners: [],
  horizontalScroll: false,
  verticalScroll: false
};

var render_predictBarLineChart = {
  type: "cccBarChart",
  name: "render_predictBarLineChart",
  priority: 5,
  parameters: [["institutionIDParam","institutionIDParam"],["classIDParam","classIDParam"],["studentIDParam","studentIDParam"]],
  executeAtStart: false,
  postFetch: function f(data){
    
    var result = data.resultset;
    var length = result.length;
    var nat_avg = [], prog_avg = [];
    
    for ( var i = 0; i < length; i++ ) {
        var avgs = result[i].splice(3, 2);
        prog_avg[i] = avgs[1];
        nat_avg[i]  = avgs[0];
    }
    
    i = i - 1;
    result[i][3] = result[i][3] - result[i][4];
    result[i][4] = result[i][4] - result[i][5];
    
    var metadata = data.metadata;
    metadata.splice(3, 2);
    
    for ( i = 0; i < length; i++ ){
        for ( var j = 1; j < result[i].length; j++ ){
            if ( result[i][j] !== null && j < 3){
                result[i][j] = Math.round(result[i][j]); //- Dashboards.getParameterValue('zeroParam'));
            }else{
                if ( result[i][j] !== null && result[i][j] > Dashboards.getParameterValue('zeroParam') - 1 ){
                    result[i][j] = Math.round(result[i][j]); //- Dashboards.getParameterValue('zeroParam'));
                }
            }
        }
    }
    
    //warningLine Data
    for ( i = 0; i < length; i++ ){
        for ( j = 0; j < warningLineParam.length; j++ ){
            if ( warningLineParam[j][0] == result[i][0] ){
                result[i][6] = warningLineParam[j][1];
                break;
            }else{
                result[i][6] = null;
            }
        }
    }
    metadata[6] = {colIndex: 8, colType: "Integer", colName: "warningLine"};
    
    return data;
} ,
  htmlObject: "barLineChartColumnObj",
  preExecution: function f(){
    pvc.PercentValue.parse.apply(); //apply patch to bug CDF-354
    this.chartDefinition.orthoAxisFixedMin = zeroParam;
    ascend.defaultExtPoints.apply(this);
    ascend.predictorExtPoints.apply(this);
    ascend.avgsBar.apply(this);
    //ascend.errorLine.apply(this);
    ascend.hideValues.apply(this);
    
    //build warning line for improve or decrease in Pulse Score
    var param = parseFloat(Dashboards.getParameterValue('warningParam'));
    var result = render_totalScoresQueryComponent.queryState.lastResults().resultset,
       length = result.length;
    if ( param !== 0 & length > 2 ){
        var line = [];
        line.push([result[warningRow][0],result[warningRow][5] - zeroParam + 10]);
        line.push([result[warningRow-1][0],result[warningRow-1][5] - zeroParam + 10]);
        line.push([warningParam,result[warningRow][16]]);
        Dashboards.setParameter('warningLineParam', line);
    }
    ascend.series.apply(this);
}
 ,
  listeners: [],
  chartDefinition:  {
    dataAccessId: "barLineQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda",
    width: 450,
    height: 350,
    extensionPoints: [],
    colors: ["#8FCEDD","#FF9A28","#B2CC99","#FFFFB2","#E5BFBF"],
    animate: false,
    barOrthoSizeMin: 1.5,
    barSizeMax: 30,
    barSizeRatio: 0.9,
    barStackedMargin: 0,
    baseAxisGrid: false,
    baseAxisOffset: 0,
    baseAxisOverlappedLabelsMode: "hide",
    baseAxisTicks: true,
    baseAxisTitleFont: "12px sans-serif",
    baseAxisTitleMargins: "0",
    baseAxisTooltipAutoContent: "value",
    baseAxisTooltipEnabled: false,
    baseAxisVisible: false,
    clearSelectionMode: "emptySpaceClick",
    clickable: true,
    clickAction: function f(e){
    var strhem = e.atoms.series.value;
    if(strhem == "PulseScore") 
        $("#chartPopUpObj").text("This is your probability of passing the NCLEX\xAE based on your first attempt in each content area covered to date.");
    else if(strhem == "ProctoredTestScore")
        $("#chartPopUpObj").text("This value represents your score from your first attempt of the proctored test taken in this content area.");
    else if((strhem == "Red") || (strhem == "Green"))
       // $("#chartPopUpObj").text("This is your probability of passing the NCLEX\xAE based on your first attempt in each content area covered to date.");
       $("#chartPopUpObj").text("This student has completed the ATI Comprehensive Predictor and this is the associated probability of passing NCLEX score. Pulse stops providing predictions once the ATI Comprehensive Predictor is administered.");
    
    render_barPopupComponent.popup($("#predictTitleRow"));
} ,
    color2AxisColors: [],
    color2AxisLegendClickMode: "toggleVisible",
    color2AxisLegendVisible: true,
    compatVersion: 2,
    contentMargins: "0",
    contentPaddings: "0",
    crosstabMode: true,
    ctrlSelectMode: true,
    dataIgnoreMetadataLabels: false,
    dataMeasuresInColumns: true,
    dataSeparator: "~",
    groupedLabelSep: " ~ ",
    hoverable: false,
    ignoreNulls: true,
    isMultiValued: false,
    leafContentOverflow: "visible",
    legend: false,
    legendClickMode: "toggleVisible",
    legendFont: "10px sans-serif",
    legendItemPadding: "2.5",
    legendMargins: "0",
    legendMarkerSize: 15,
    legendPaddings: "5",
    legendPosition: "bottom",
    legendTextMargin: 6,
    legendVisible: true,
    margins: "15 0 0 0",
    measuresIndexes: [],
    multiChartColumnsMax: 3,
    multiChartIndexes: [],
    multiChartOverflow: "grow",
    multiChartSingleColFillsHeight: true,
    multiChartSingleRowFillsHeight: true,
    nullInterpolationMode: "none",
    orientation: "vertical",
    ortho2AxisDomainRoundMode: "tick",
    ortho2AxisDomainScope: "global",
    ortho2AxisGrid: false,
    ortho2AxisMinorTicks: true,
    ortho2AxisOffset: 0,
    ortho2AxisOriginIsZero: false,
    ortho2AxisOverlappedLabelsMode: "hide",
    ortho2AxisTicks: true,
    ortho2AxisTickUnitMax: "Infinity",
    ortho2AxisTickUnitMin: "0",
    ortho2AxisTitleFont: "12px sans-serif",
    ortho2AxisTitleMargins: "0",
    ortho2AxisVisible: false,
    ortho2AxisZeroLine: false,
    orthoAxisDesiredTickCount: 6,
    orthoAxisDomainRoundMode: "tick",
    orthoAxisDomainScope: "global",
    orthoAxisFixedMin: "0",
    orthoAxisGrid: true,
    orthoAxisMinorTicks: false,
    orthoAxisOffset: 0,
    orthoAxisOriginIsZero: false,
    orthoAxisOverlappedLabelsMode: "hide",
    orthoAxisSize: "50",
    orthoAxisTickFormatter: function f(v){
    /*
    if ( v + zeroParam < 101 ){
        return v + Dashboards.getParameterValue('zeroParam') + "%";
    }else{
        return " ";
    }
    */
    if ( v < 101 ){
        return v + "%";
    }else{
        return " ";
    }
} ,
    orthoAxisTicks: false,
    orthoAxisTickUnitMax: "Infinity",
    orthoAxisTickUnitMin: "0",
    orthoAxisTitleFont: "12px sans-serif",
    orthoAxisTitleMargins: "0",
    orthoAxisVisible: true,
    orthoAxisZeroLine: true,
    overflowMarkersVisible: false,
    paddings: "0",
    panelSizeRatio: 1,
    plot2: false,
    plot2AreasVisible: false,
    plot2ColorAxis: 2,
    plot2DotsVisible: true,
    plot2LinesVisible: true,
    plot2NullInterpolationMode: "none",
    plot2OrthoAxis: 1,
    plot2Series: [],
    plot2SeriesIndexes: -1,
    plot2Stacked: false,
    plot2ValuesAnchor: "center",
    plot2ValuesFont: "12px sans-serif",
    plot2ValuesMask: "{value}%",
    plot2ValuesVisible: true,
    plotFrameVisible: false,
    pointingMode: "near",
    readers: [],
    selectable: false,
    seriesInRows: false,
    smallContentMargins: "0",
    smallContentPaddings: "0",
    smallMargins: "2%",
    smallPaddings: "0",
    smallTitleFont: "14px sans-serif",
    smallTitleMargins: "0",
    smallTitlePaddings: "0",
    smallTitlePosition: "top",
    stacked: true,
    timeSeries: false,
    timeSeriesFormat: "%Y-%m-%d",
    titleFont: "14px sans-serif",
    titleMargins: "0",
    titlePaddings: "0",
    titlePosition: "top",
    tooltipEnabled: false,
    tooltipFade: true,
    tooltipFollowMouse: false,
    tooltipFormat: function f(scene){
    var fix  = def.html.escape;
    var vars = scene.vars;
    
    if ( vars.series.value == "warningLine" ){
        if ( warningParam !== 0 ){
            return "<div style='text-align:left'>" + 
                warningLineParam[2][1] +
            "</div>";
        }
    }else if (vars.category.label !== "My Probability of Passing NCLEX" && 
            vars.series.label !== "Average Probability of Passing NCLEX" ){
        return "<div style='text-align:left'>" + 
            "<b>Series</b>: "  + fix(vars.series.label)   + "<br/>" + 
            "<b>Test</b>: "   + fix(vars.category.label) + "<br/>" + 
            "<b>Value</b>: " + fix(vars.value.label) + "%"    + 
       "</div>";
    }
    
    
} ,
    tooltipHtml: true,
    tooltipOpacity: 0.9,
    trendAreasVisible: false,
    trendColorAxis: 2,
    trendDotsVisible: false,
    trendLinesVisible: true,
    trendOrthoAxis: 1,
    trendStacked: false,
    trendValuesAnchor: "right",
    trendValuesFont: "10px sans-serif",
    trendValuesVisible: false,
    valueFormat: function f(v){
    return v; //+ Dashboards.getParameterValue('zeroParam');
} ,
    valuesAnchor: "top",
    valuesFont: "10px sans-serif",
    valuesMask: "{value}%",
    valuesNormalized: false,
    valuesOverflow: "hide",
    valuesVisible: true
  }
};

var render_completeBarLineChart = {
  type: "cccBarChart",
  name: "render_completeBarLineChart",
  priority: 5,
  parameters: [["institutionIDParam","institutionIDParam"],["classIDParam","classIDParam"],["studentIDParam","studentIDParam"]],
  executeAtStart: false,
  postFetch: function f(data){
    
    var result = data.resultset;
    var length = result.length;
    var nat_avg = [], prog_avg = [];
    
    for ( var i = 0; i < length; i++ ) {
        var avgs = result[i].splice(3, 2);
        prog_avg[i] = avgs[1];
        nat_avg[i]  = avgs[0];
    }
    
    i = i - 1;
    result[i][3] = result[i][3] - result[i][4];
    result[i][4] = result[i][4] - result[i][5];
    
    var metadata = data.metadata;
    metadata.splice(3, 2);
    
    for ( var i = 0; i < length; i++ ){
        for ( var j = 1; j < result[i].length; j++ ){
            if ( result[i][j] !== null && j < 3){
                result[i][j] = Math.round(result[i][j]); //- Dashboards.getParameterValue('zeroParam'));
            }else{
                if ( result[i][j] !== null && result[i][j] > Dashboards.getParameterValue('zeroParam') - 1 ){
                    result[i][j] = Math.round(result[i][j]); //- Dashboards.getParameterValue('zeroParam'));
                }
            }
        }
    }
    
    return data;
} ,
  htmlObject: "completeBarLineChartColumnObj",
  preExecution: function f(){
    pvc.PercentValue.parse.apply(); //apply patch to bug CDF-354
    this.chartDefinition.orthoAxisFixedMin = zeroParam;
    ascend.defaultExtPoints.apply(this);
    ascend.predictorExtPoints.apply(this);
    ascend.completeExtPoints.apply(this);
    ascend.avgsBar.apply(this);
    //ascend.errorLine.apply(this);
    ascend.hideValues.apply(this);
    ascend.finalBar.apply(this);
} ,
  listeners: [],
  chartDefinition:  {
    dataAccessId: "barLineQuery",
    path: "/public/ascend/dashboards/student_drilldown.cda",
    width: 450,
    height: 350,
    extensionPoints: [],
    colors: ["#8FCEDD","#B2CC99","#FFFFB2","#E5BFBF","#F47D21"],
    animate: false,
    barOrthoSizeMin: 1.5,
    barSizeMax: 30,
    barSizeRatio: 0.9,
    barStackedMargin: 0,
    baseAxisGrid: false,
    baseAxisOffset: 0,
    baseAxisOverlappedLabelsMode: "hide",
    baseAxisTicks: true,
    baseAxisTitleFont: "12px sans-serif",
    baseAxisTitleMargins: "0",
    baseAxisTooltipAutoContent: "value",
    baseAxisTooltipEnabled: true,
    baseAxisVisible: false,
    clearSelectionMode: "emptySpaceClick",
    clickable: true,
    clickAction: function f(e){
    var strhem = e.atoms.series.value;
    if(strhem == "PulseScore") 
        $("#chartPopUpObj").text("This is your probability of passing the NCLEX\xAE based on your first attempt in each content area covered to date.");
    else if(strhem == "ProctoredTestScore")
        $("#chartPopUpObj").text("This value represents your score from your first attempt of the proctored test taken in this content area.");
    else if((strhem == "Red") || (strhem == "Green"))
        // $("#chartPopUpObj").text("This is your probability of passing the NCLEX\xAE based on your first attempt in each content area covered to date.");
       $("#chartPopUpObj").text("This student has completed the ATI Comprehensive Predictor and this is the associated probability of passing NCLEX score. Pulse stops providing predictions once the ATI Comprehensive Predictor is administered.");
    
    render_barPopupComponent.popup($("#predictTitleRow"));
}
 ,
    color2AxisColors: [],
    color2AxisLegendClickMode: "toggleVisible",
    color2AxisLegendVisible: true,
    compatVersion: 2,
    contentMargins: "0",
    contentPaddings: "0",
    crosstabMode: true,
    ctrlSelectMode: true,
    dataIgnoreMetadataLabels: false,
    dataMeasuresInColumns: true,
    dataSeparator: "~",
    groupedLabelSep: " ~ ",
    hoverable: false,
    ignoreNulls: true,
    isMultiValued: false,
    leafContentOverflow: "visible",
    legend: false,
    legendClickMode: "toggleVisible",
    legendFont: "10px sans-serif",
    legendItemPadding: "2.5",
    legendMargins: "0",
    legendMarkerSize: 15,
    legendPaddings: "5",
    legendPosition: "bottom",
    legendTextMargin: 6,
    legendVisible: true,
    margins: "15 0 0 0",
    measuresIndexes: [],
    multiChartColumnsMax: 3,
    multiChartIndexes: [],
    multiChartOverflow: "grow",
    multiChartSingleColFillsHeight: true,
    multiChartSingleRowFillsHeight: true,
    nullInterpolationMode: "none",
    orientation: "vertical",
    ortho2AxisDomainRoundMode: "tick",
    ortho2AxisDomainScope: "global",
    ortho2AxisGrid: false,
    ortho2AxisMinorTicks: true,
    ortho2AxisOffset: 0,
    ortho2AxisOriginIsZero: false,
    ortho2AxisOverlappedLabelsMode: "hide",
    ortho2AxisTicks: true,
    ortho2AxisTickUnitMax: "Infinity",
    ortho2AxisTickUnitMin: "0",
    ortho2AxisTitleFont: "12px sans-serif",
    ortho2AxisTitleMargins: "0",
    ortho2AxisVisible: false,
    ortho2AxisZeroLine: false,
    orthoAxisDesiredTickCount: 6,
    orthoAxisDomainRoundMode: "tick",
    orthoAxisDomainScope: "global",
    orthoAxisGrid: true,
    orthoAxisMinorTicks: false,
    orthoAxisOffset: 0,
    orthoAxisOriginIsZero: false,
    orthoAxisOverlappedLabelsMode: "hide",
    orthoAxisSize: "50",
    orthoAxisTickFormatter: function f(v){
    /*
    if ( v + zeroParam < 101 ){
        return v + Dashboards.getParameterValue('zeroParam') + "%";
    }else{
        return " ";
    }
    */
    if ( v < 101 ){
        return v + "%";
    }else{
        return " ";
    }
} ,
    orthoAxisTicks: false,
    orthoAxisTickUnitMax: "Infinity",
    orthoAxisTickUnitMin: "0",
    orthoAxisTitleFont: "12px sans-serif",
    orthoAxisTitleMargins: "0",
    orthoAxisVisible: true,
    orthoAxisZeroLine: true,
    overflowMarkersVisible: false,
    paddings: "0",
    panelSizeRatio: 1,
    plot2: true,
    plot2AreasVisible: false,
    plot2ColorAxis: 2,
    plot2DotsVisible: true,
    plot2LinesVisible: true,
    plot2NullInterpolationMode: "none",
    plot2OrthoAxis: 1,
    plot2Series: ["PulseScore"],
    plot2SeriesIndexes: -1,
    plot2Stacked: false,
    plot2ValuesAnchor: "center",
    plot2ValuesFont: "12px sans-serif",
    plot2ValuesMask: "{value}%",
    plot2ValuesVisible: true,
    plotFrameVisible: false,
    pointingMode: "near",
    readers: [],
    selectable: false,
    seriesInRows: false,
    smallContentMargins: "0",
    smallContentPaddings: "0",
    smallMargins: "2%",
    smallPaddings: "0",
    smallTitleFont: "14px sans-serif",
    smallTitleMargins: "0",
    smallTitlePaddings: "0",
    smallTitlePosition: "top",
    stacked: true,
    timeSeries: false,
    timeSeriesFormat: "%Y-%m-%d",
    titleFont: "14px sans-serif",
    titleMargins: "0",
    titlePaddings: "0",
    titlePosition: "top",
    tooltipEnabled: false,
    tooltipFade: true,
    tooltipFollowMouse: false,
    tooltipFormat: function f(scene){
    var fix  = def.html.escape;
    var vars = scene.vars;
    
    if (vars.category.label !== "Comprehensive Predictor" && vars.series.label !== "Comprehensive Predictor"){
        return "<div style='text-align:left'>" + 
            "<b>Series</b>: "  + fix(vars.series.label)   + "<br/>" + 
            "<b>Test</b>: "   + fix(vars.category.label) + "<br/>" + 
            "<b>Value</b>: " + fix(vars.value.label) + "%"    + 
       "</div>";
    }
} ,
    tooltipHtml: true,
    tooltipOpacity: 0.9,
    trendAreasVisible: false,
    trendColorAxis: 2,
    trendDotsVisible: false,
    trendLinesVisible: true,
    trendOrthoAxis: 1,
    trendStacked: false,
    trendValuesAnchor: "right",
    trendValuesFont: "10px sans-serif",
    trendValuesVisible: false,
    valueFormat: function f(v){
    return v; //+ Dashboards.getParameterValue('zeroParam');
} ,
    valuesAnchor: "top",
    valuesFont: "10px sans-serif",
    valuesMask: "{value}%",
    valuesNormalized: false,
    valuesOverflow: "hide",
    valuesVisible: true
  }
};

Dashboards.addComponents([render_feedbackText, render_dateRange_dummy, render_nameSessionVarQueryComponent, render_studentNameQueryComponent, render_nameRoleHeader, render_studentNameQuery, render_nameHeader, render_printButton, render_feedbackPopupButton, render_feedbackPopup, render_saveButtonComponent, render_emptyFeedbackPopup, render_sendOkPopup, render_sendNotOkPopup, render_averageTitleQueryComponent, render_averageTitle, render_titlePopupButton, render_titlePopup, render_barLineLegendFreeform, render_errorLineQueryComponent, render_totalScoresQueryComponent, render_customLegendFreeformComponent, render_nationalPassRateButton, render_nationalPassRatePopup, render_institutionPassRateButton, render_institutionPassRatePopup, render_barLineDetailsButton, render_barLineDetailsPopup, render_showHideButton, render_proctoredTable, render_termsButton, render_termsPopup, render_termsText, render_viewUsageButton, render_barPopupComponent, render_predictBarLineChart, render_completeBarLineChart]);

</script>

<script language="javascript" type="text/javascript">
Dashboards.init();
</script>

		
				<script type="text/javascript">
		$( function(){
				//$(".round").corner();
				$(".cdfdd-round").corner();
				$(".cdfdd-bevel").corner("bevel");
				$(".cdfdd-notch").corner("notch");
				$(".cdfdd-bite").corner("bite");
				$(".cdfdd-bevel_top").corner("bevel top");
				$(".cdfdd-dog_tr").corner("dog tr");
			} ) ;
		</script>
		

	</body>
</html>


